[
    {
        "label": "json",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "json",
        "description": "json",
        "detail": "json",
        "documentation": {}
    },
    {
        "label": "os",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "os",
        "description": "os",
        "detail": "os",
        "documentation": {}
    },
    {
        "label": "shutil",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "shutil",
        "description": "shutil",
        "detail": "shutil",
        "documentation": {}
    },
    {
        "label": "re",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "re",
        "description": "re",
        "detail": "re",
        "documentation": {}
    },
    {
        "label": "urllib.request",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "urllib.request",
        "description": "urllib.request",
        "detail": "urllib.request",
        "documentation": {}
    },
    {
        "label": "Optional",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "Optional",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "Optional",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "Optional",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "glob",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "glob",
        "description": "glob",
        "detail": "glob",
        "documentation": {}
    },
    {
        "label": "subprocess",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "subprocess",
        "description": "subprocess",
        "detail": "subprocess",
        "documentation": {}
    },
    {
        "label": "tempfile",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "tempfile",
        "description": "tempfile",
        "detail": "tempfile",
        "documentation": {}
    },
    {
        "label": "dataclass",
        "importPath": "dataclasses",
        "description": "dataclasses",
        "isExtraImport": true,
        "detail": "dataclasses",
        "documentation": {}
    },
    {
        "label": "field",
        "importPath": "dataclasses",
        "description": "dataclasses",
        "isExtraImport": true,
        "detail": "dataclasses",
        "documentation": {}
    },
    {
        "label": "platform",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "platform",
        "description": "platform",
        "detail": "platform",
        "documentation": {}
    },
    {
        "label": "sys",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "sys",
        "description": "sys",
        "detail": "sys",
        "documentation": {}
    },
    {
        "label": "termios",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "termios",
        "description": "termios",
        "detail": "termios",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "traceback",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "traceback",
        "description": "traceback",
        "detail": "traceback",
        "documentation": {}
    },
    {
        "label": "log_error",
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_step",
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_info",
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_success",
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "prompt_yes_no",
        "importPath": "nvidia_driver_setup.utils.prompts",
        "description": "nvidia_driver_setup.utils.prompts",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.utils.prompts",
        "documentation": {}
    },
    {
        "label": "prompt_multi_select",
        "importPath": "nvidia_driver_setup.utils.prompts",
        "description": "nvidia_driver_setup.utils.prompts",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.utils.prompts",
        "documentation": {}
    },
    {
        "label": "run_preliminary_checks",
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "detect_existing_installations",
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "get_system_info",
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "display_system_info",
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "full_nvidia_cleanup",
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "cleanup_nvidia_repos",
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "select_nvidia_driver",
        "importPath": "nvidia_driver_setup.nvidia.drivers",
        "description": "nvidia_driver_setup.nvidia.drivers",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.nvidia.drivers",
        "documentation": {}
    },
    {
        "label": "select_cuda_version",
        "importPath": "nvidia_driver_setup.nvidia.cuda",
        "description": "nvidia_driver_setup.nvidia.cuda",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.nvidia.cuda",
        "documentation": {}
    },
    {
        "label": "install_vulkan_sdk",
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "install_cuda_toolkit",
        "importPath": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "description": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "documentation": {}
    },
    {
        "label": "setup_docker",
        "importPath": "nvidia_driver_setup.docker.setup",
        "description": "nvidia_driver_setup.docker.setup",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.docker.setup",
        "documentation": {}
    },
    {
        "label": "apply_nvidia_patches",
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "get_nvenc_session_info",
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "configure_docker_for_media",
        "importPath": "nvidia_driver_setup.docker.config",
        "description": "nvidia_driver_setup.docker.config",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.docker.config",
        "documentation": {}
    },
    {
        "label": "Enum",
        "importPath": "enum",
        "description": "enum",
        "isExtraImport": true,
        "detail": "enum",
        "documentation": {}
    },
    {
        "label": "Path",
        "importPath": "pathlib",
        "description": "pathlib",
        "isExtraImport": true,
        "detail": "pathlib",
        "documentation": {}
    },
    {
        "label": "main",
        "importPath": "nvidia_driver_setup.cli",
        "description": "nvidia_driver_setup.cli",
        "isExtraImport": true,
        "detail": "nvidia_driver_setup.cli",
        "documentation": {}
    },
    {
        "label": "configure_docker_for_media",
        "kind": 2,
        "importPath": "nvidia_driver_setup.docker.config",
        "description": "nvidia_driver_setup.docker.config",
        "peekOfCode": "def configure_docker_for_media():\n    \"\"\"Configure Docker with optimized settings for NVIDIA media\"\"\"\n    log_step(\"Configuring Docker for media processing...\")\n    if not prompt_yes_no(\"Configure Docker with optimized settings for NVIDIA media?\"):\n        return\n    use_cgroupfs = prompt_yes_no(\n        \"Would you like to configure Docker to use cgroupfs driver? \"\n        \"(Fixes common 'CUDA_ERROR_NO_DEVICE' issues)\"\n    )\n    _create_docker_daemon_config(use_cgroupfs)",
        "detail": "nvidia_driver_setup.docker.config",
        "documentation": {}
    },
    {
        "label": "setup_docker",
        "kind": 2,
        "importPath": "nvidia_driver_setup.docker.setup",
        "description": "nvidia_driver_setup.docker.setup",
        "peekOfCode": "def setup_docker():\n    \"\"\"Setup Docker with NVIDIA support\"\"\"\n    log_step(\"Setting up Docker with NVIDIA support...\")\n    _remove_existing_docker()\n    _install_docker_prerequisites()\n    _setup_docker_repository()\n    _install_docker_packages()\n    _start_docker_service()\n    _setup_nvidia_container_toolkit()\n    _install_docker_compose()",
        "detail": "nvidia_driver_setup.docker.setup",
        "documentation": {}
    },
    {
        "label": "DOCKER_COMPOSE_VERSION",
        "kind": 5,
        "importPath": "nvidia_driver_setup.docker.setup",
        "description": "nvidia_driver_setup.docker.setup",
        "peekOfCode": "DOCKER_COMPOSE_VERSION = \"v2.25.0\"\ndef setup_docker():\n    \"\"\"Setup Docker with NVIDIA support\"\"\"\n    log_step(\"Setting up Docker with NVIDIA support...\")\n    _remove_existing_docker()\n    _install_docker_prerequisites()\n    _setup_docker_repository()\n    _install_docker_packages()\n    _start_docker_service()\n    _setup_nvidia_container_toolkit()",
        "detail": "nvidia_driver_setup.docker.setup",
        "documentation": {}
    },
    {
        "label": "select_cuda_version",
        "kind": 2,
        "importPath": "nvidia_driver_setup.nvidia.cuda",
        "description": "nvidia_driver_setup.nvidia.cuda",
        "peekOfCode": "def select_cuda_version() -> str:\n    \"\"\"Select CUDA version for installation.\"\"\"\n    log_step(\"CUDA Version Selection\")\n    log_info(\"This selection determines which CUDA version will be used in Docker containers.\")\n    log_info(\"It does not install CUDA on the host - that's handled by the NVIDIA driver.\\n\")\n    log_info(\"Fetching available versions from Docker Hub...\")\n    live_versions = _fetch_versions_from_dockerhub()\n    if live_versions:\n        log_info(f\"Found {len(live_versions)} available CUDA image versions.\")\n        choices: list[str] = []",
        "detail": "nvidia_driver_setup.nvidia.cuda",
        "documentation": {}
    },
    {
        "label": "_DOCKERHUB_TAGS_URL",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.cuda",
        "description": "nvidia_driver_setup.nvidia.cuda",
        "peekOfCode": "_DOCKERHUB_TAGS_URL = (\n    \"https://hub.docker.com/v2/repositories/nvidia/cuda/tags/\"\n    \"?page_size=100&name=devel-ubuntu22.04\"\n)\n_DOCKERHUB_TIMEOUT = 15  # seconds\n# Minimum Linux driver required per CUDA version (from NVIDIA release notes).\n# Keys are the CUDA *image* version (X.Y.Z); values are the min driver string.\n_MIN_DRIVER: dict[str, str] = {\n    \"13.1.1\": \"590.48.01\",\n    \"13.1.0\": \"590.44.01\",",
        "detail": "nvidia_driver_setup.nvidia.cuda",
        "documentation": {}
    },
    {
        "label": "_DOCKERHUB_TIMEOUT",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.cuda",
        "description": "nvidia_driver_setup.nvidia.cuda",
        "peekOfCode": "_DOCKERHUB_TIMEOUT = 15  # seconds\n# Minimum Linux driver required per CUDA version (from NVIDIA release notes).\n# Keys are the CUDA *image* version (X.Y.Z); values are the min driver string.\n_MIN_DRIVER: dict[str, str] = {\n    \"13.1.1\": \"590.48.01\",\n    \"13.1.0\": \"590.44.01\",\n    \"13.0.2\": \"580.95.05\",\n    \"13.0.1\": \"580.82.07\",\n    \"13.0.0\": \"580.65.06\",\n    \"12.9.1\": \"575.57.08\",",
        "detail": "nvidia_driver_setup.nvidia.cuda",
        "documentation": {}
    },
    {
        "label": "install_cuda_toolkit",
        "kind": 2,
        "importPath": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "description": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "peekOfCode": "def install_cuda_toolkit() -> None:\n    \"\"\"Install the NVIDIA CUDA Toolkit on the host.\n    Main entry point called from the CLI menu.\n    \"\"\"\n    log_step(\"CUDA Toolkit Installation\")\n    log_info(\"This installs the CUDA compiler (nvcc), development libraries,\")\n    log_info(\"and headers on the host.  Separate from CUDA container images.\\n\")\n    # Check if already installed\n    existing = _detect_cuda_toolkit()\n    if existing:",
        "detail": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "documentation": {}
    },
    {
        "label": "_CUDA_PROFILE_SCRIPT",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "description": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "peekOfCode": "_CUDA_PROFILE_SCRIPT = \"/etc/profile.d/cuda.sh\"\n# ---------------------------------------------------------------------------\n# Detection\n# ---------------------------------------------------------------------------\ndef _detect_cuda_toolkit() -> Optional[str]:\n    \"\"\"Check if the CUDA Toolkit is installed on the host.\n    Returns:\n        Version string (e.g. \"12.8.0\") if installed, None otherwise.\n    \"\"\"\n    # Try nvcc first",
        "detail": "nvidia_driver_setup.nvidia.cuda_toolkit",
        "documentation": {}
    },
    {
        "label": "select_nvidia_driver",
        "kind": 2,
        "importPath": "nvidia_driver_setup.nvidia.drivers",
        "description": "nvidia_driver_setup.nvidia.drivers",
        "peekOfCode": "def select_nvidia_driver():\n    \"\"\"Select and install NVIDIA driver\"\"\"\n    log_step(\"Selecting NVIDIA driver version...\")\n    # Check if drivers are already installed\n    current_driver = _check_existing_driver()\n    if current_driver:\n        _handle_existing_driver(current_driver)\n    else:\n        _install_new_driver()\n    _post_install_checks()",
        "detail": "nvidia_driver_setup.nvidia.drivers",
        "documentation": {}
    },
    {
        "label": "_VERSION_PATTERN",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.drivers",
        "description": "nvidia_driver_setup.nvidia.drivers",
        "peekOfCode": "_VERSION_PATTERN = re.compile(r'^[0-9]+\\.[0-9]+')\n_VERSION_MAJOR = re.compile(r'^[0-9]+$')\ndef select_nvidia_driver():\n    \"\"\"Select and install NVIDIA driver\"\"\"\n    log_step(\"Selecting NVIDIA driver version...\")\n    # Check if drivers are already installed\n    current_driver = _check_existing_driver()\n    if current_driver:\n        _handle_existing_driver(current_driver)\n    else:",
        "detail": "nvidia_driver_setup.nvidia.drivers",
        "documentation": {}
    },
    {
        "label": "_VERSION_MAJOR",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.drivers",
        "description": "nvidia_driver_setup.nvidia.drivers",
        "peekOfCode": "_VERSION_MAJOR = re.compile(r'^[0-9]+$')\ndef select_nvidia_driver():\n    \"\"\"Select and install NVIDIA driver\"\"\"\n    log_step(\"Selecting NVIDIA driver version...\")\n    # Check if drivers are already installed\n    current_driver = _check_existing_driver()\n    if current_driver:\n        _handle_existing_driver(current_driver)\n    else:\n        _install_new_driver()",
        "detail": "nvidia_driver_setup.nvidia.drivers",
        "documentation": {}
    },
    {
        "label": "PatchVariant",
        "kind": 6,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "class PatchVariant:\n    \"\"\"A single old -> new byte replacement at the patch site.\"\"\"\n    old_hex: str\n    new_hex: str\n    label: str\n@dataclass(frozen=True)\nclass AnchorPattern:\n    \"\"\"An anchor byte sequence and its associated patch variants.\"\"\"\n    anchor: str\n    skip: int",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "AnchorPattern",
        "kind": 6,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "class AnchorPattern:\n    \"\"\"An anchor byte sequence and its associated patch variants.\"\"\"\n    anchor: str\n    skip: int\n    patched_marker: str\n    variants: list[PatchVariant] = field(default_factory=list)\n_ANCHORS: list[AnchorPattern] = [\n    # Variant A: result stored in R14D (mov r14d,eax = 41 89 c6)\n    # Used by 580.x+ drivers\n    AnchorPattern(",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "PatchResult",
        "kind": 6,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "class PatchResult:\n    \"\"\"Result of a binary patch operation.\"\"\"\n    success: bool\n    already_patched: bool\n    variant_label: str\n    offset: int\n    message: str\n# ── Driver version detection ────────────────────────────────────────\ndef _detect_driver_version(manual_version: Optional[str] = None, verbose: bool = False) -> Optional[str]:\n    \"\"\"Detect the installed NVIDIA driver version using multiple fallback methods.",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "get_nvenc_session_info",
        "kind": 2,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "def get_nvenc_session_info() -> dict:\n    \"\"\"Return NVENC session status for the current GPU and driver.\n    Returns:\n        Dict with keys:\n            native_limit: int or None (12, 5, 3, or None for unrestricted)\n            is_patched: bool\n            is_professional: bool\n            driver_version: str or None\n            status_label: str  (e.g. \"[12 sessions]\", \"[Unlimited]\", \"[Pro]\")\n            patch_useful: bool (True if patching would increase sessions)",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "apply_nvidia_patches",
        "kind": 2,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "def apply_nvidia_patches() -> None:\n    \"\"\"Apply NVIDIA patches for unlimited NVENC sessions\"\"\"\n    log_step(\"NVIDIA NVENC & NvFBC unlimited sessions patch...\")\n    session_info = get_nvenc_session_info()\n    if session_info['is_professional']:\n        log_success(\"Professional GPU detected -- NVENC sessions are already unrestricted\")\n        log_info(\"No NVENC patch needed\")\n    elif session_info['is_patched']:\n        log_success(\"NVENC is already patched -- sessions are unlimited\")\n    else:",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "_VERSION_PATTERN",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "_VERSION_PATTERN = re.compile(r'^[0-9]+\\.[0-9]+')\n# Professional GPU name patterns (these GPUs have unrestricted NVENC sessions)\n_PROFESSIONAL_GPU_PATTERNS: list[str] = [\n    \"quadro\", \"tesla\", \"rtx a\", \"rtx pro\",\n    \" a100\", \" a40\", \" a30\", \" a16\", \" a10\", \" a2\",\n    \" l40\", \" l20\", \" l4\", \" l2\",\n    \" h100\", \" h200\", \" b100\", \" b200\",\n]\n# Driver version thresholds for consumer NVENC session limits (Linux)\n_NVENC_LIMIT_12_MIN_DRIVER = 590",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "_NVENC_LIMIT_12_MIN_DRIVER",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "_NVENC_LIMIT_12_MIN_DRIVER = 590\n_NVENC_LIMIT_5_MIN_DRIVER = 531\n_NVENC_LIMIT_3_MIN_DRIVER = 450\n# Backup directory for original libnvidia-encode.so files\n_BACKUP_DIR = \"/opt/nvidia/libnvidia-encode-backup\"\n# Standard library search paths (ordered by preference)\n_LIBRARY_SEARCH_PATHS: list[str] = [\n    \"/usr/lib/x86_64-linux-gnu\",\n    \"/usr/lib64\",\n    \"/usr/lib\",",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "_NVENC_LIMIT_5_MIN_DRIVER",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "_NVENC_LIMIT_5_MIN_DRIVER = 531\n_NVENC_LIMIT_3_MIN_DRIVER = 450\n# Backup directory for original libnvidia-encode.so files\n_BACKUP_DIR = \"/opt/nvidia/libnvidia-encode-backup\"\n# Standard library search paths (ordered by preference)\n_LIBRARY_SEARCH_PATHS: list[str] = [\n    \"/usr/lib/x86_64-linux-gnu\",\n    \"/usr/lib64\",\n    \"/usr/lib\",\n    \"/lib/x86_64-linux-gnu\",",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "_NVENC_LIMIT_3_MIN_DRIVER",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "_NVENC_LIMIT_3_MIN_DRIVER = 450\n# Backup directory for original libnvidia-encode.so files\n_BACKUP_DIR = \"/opt/nvidia/libnvidia-encode-backup\"\n# Standard library search paths (ordered by preference)\n_LIBRARY_SEARCH_PATHS: list[str] = [\n    \"/usr/lib/x86_64-linux-gnu\",\n    \"/usr/lib64\",\n    \"/usr/lib\",\n    \"/lib/x86_64-linux-gnu\",\n]",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "_BACKUP_DIR",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.patches",
        "description": "nvidia_driver_setup.nvidia.patches",
        "peekOfCode": "_BACKUP_DIR = \"/opt/nvidia/libnvidia-encode-backup\"\n# Standard library search paths (ordered by preference)\n_LIBRARY_SEARCH_PATHS: list[str] = [\n    \"/usr/lib/x86_64-linux-gnu\",\n    \"/usr/lib64\",\n    \"/usr/lib\",\n    \"/lib/x86_64-linux-gnu\",\n]\n# ── Binary patch anchor definitions ─────────────────────────────────\n#",
        "detail": "nvidia_driver_setup.nvidia.patches",
        "documentation": {}
    },
    {
        "label": "install_vulkan_sdk",
        "kind": 2,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "def install_vulkan_sdk() -> None:\n    \"\"\"Install the LunarG Vulkan SDK on the host.\n    Main entry point called from the CLI menu.\n    \"\"\"\n    log_step(\"Vulkan SDK Installation\")\n    log_info(\"This installs the LunarG Vulkan SDK via official tarball.\")\n    log_info(\"(APT packages were deprecated by LunarG in May 2025)\\n\")\n    # Check if already installed\n    existing = _detect_vulkan_sdk()\n    if existing:",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "_LUNARG_VERSIONS_URL",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "_LUNARG_VERSIONS_URL = \"https://vulkan.lunarg.com/sdk/versions/linux.json\"\n_LUNARG_LATEST_URL = \"https://vulkan.lunarg.com/sdk/latest/linux.json\"\n_LUNARG_TIMEOUT = 15\n# Tarball download endpoints\n_LUNARG_DOWNLOAD_BASE = \"https://sdk.lunarg.com/sdk/download\"\n_LUNARG_SHA_BASE = \"https://sdk.lunarg.com/sdk/sha\"\n# Installation paths\n_VULKAN_SDK_BASE = \"/opt/vulkan-sdk\"\n_VULKAN_PROFILE_SCRIPT = \"/etc/profile.d/vulkan-sdk.sh\"\n_DOWNLOAD_PATH = \"/tmp/vulkan_sdk.tar.xz\"",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "_LUNARG_LATEST_URL",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "_LUNARG_LATEST_URL = \"https://vulkan.lunarg.com/sdk/latest/linux.json\"\n_LUNARG_TIMEOUT = 15\n# Tarball download endpoints\n_LUNARG_DOWNLOAD_BASE = \"https://sdk.lunarg.com/sdk/download\"\n_LUNARG_SHA_BASE = \"https://sdk.lunarg.com/sdk/sha\"\n# Installation paths\n_VULKAN_SDK_BASE = \"/opt/vulkan-sdk\"\n_VULKAN_PROFILE_SCRIPT = \"/etc/profile.d/vulkan-sdk.sh\"\n_DOWNLOAD_PATH = \"/tmp/vulkan_sdk.tar.xz\"\n# ---------------------------------------------------------------------------",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "_LUNARG_TIMEOUT",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "_LUNARG_TIMEOUT = 15\n# Tarball download endpoints\n_LUNARG_DOWNLOAD_BASE = \"https://sdk.lunarg.com/sdk/download\"\n_LUNARG_SHA_BASE = \"https://sdk.lunarg.com/sdk/sha\"\n# Installation paths\n_VULKAN_SDK_BASE = \"/opt/vulkan-sdk\"\n_VULKAN_PROFILE_SCRIPT = \"/etc/profile.d/vulkan-sdk.sh\"\n_DOWNLOAD_PATH = \"/tmp/vulkan_sdk.tar.xz\"\n# ---------------------------------------------------------------------------\n# Detection",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "_LUNARG_DOWNLOAD_BASE",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "_LUNARG_DOWNLOAD_BASE = \"https://sdk.lunarg.com/sdk/download\"\n_LUNARG_SHA_BASE = \"https://sdk.lunarg.com/sdk/sha\"\n# Installation paths\n_VULKAN_SDK_BASE = \"/opt/vulkan-sdk\"\n_VULKAN_PROFILE_SCRIPT = \"/etc/profile.d/vulkan-sdk.sh\"\n_DOWNLOAD_PATH = \"/tmp/vulkan_sdk.tar.xz\"\n# ---------------------------------------------------------------------------\n# Detection\n# ---------------------------------------------------------------------------\ndef _get_arch() -> str:",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "_LUNARG_SHA_BASE",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "_LUNARG_SHA_BASE = \"https://sdk.lunarg.com/sdk/sha\"\n# Installation paths\n_VULKAN_SDK_BASE = \"/opt/vulkan-sdk\"\n_VULKAN_PROFILE_SCRIPT = \"/etc/profile.d/vulkan-sdk.sh\"\n_DOWNLOAD_PATH = \"/tmp/vulkan_sdk.tar.xz\"\n# ---------------------------------------------------------------------------\n# Detection\n# ---------------------------------------------------------------------------\ndef _get_arch() -> str:\n    \"\"\"Return the platform subdirectory used inside the SDK tarball.\"\"\"",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "_VULKAN_SDK_BASE",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "_VULKAN_SDK_BASE = \"/opt/vulkan-sdk\"\n_VULKAN_PROFILE_SCRIPT = \"/etc/profile.d/vulkan-sdk.sh\"\n_DOWNLOAD_PATH = \"/tmp/vulkan_sdk.tar.xz\"\n# ---------------------------------------------------------------------------\n# Detection\n# ---------------------------------------------------------------------------\ndef _get_arch() -> str:\n    \"\"\"Return the platform subdirectory used inside the SDK tarball.\"\"\"\n    machine = platform.machine()\n    if machine in (\"x86_64\", \"AMD64\", \"x86-64\"):",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "_VULKAN_PROFILE_SCRIPT",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "_VULKAN_PROFILE_SCRIPT = \"/etc/profile.d/vulkan-sdk.sh\"\n_DOWNLOAD_PATH = \"/tmp/vulkan_sdk.tar.xz\"\n# ---------------------------------------------------------------------------\n# Detection\n# ---------------------------------------------------------------------------\ndef _get_arch() -> str:\n    \"\"\"Return the platform subdirectory used inside the SDK tarball.\"\"\"\n    machine = platform.machine()\n    if machine in (\"x86_64\", \"AMD64\", \"x86-64\"):\n        return \"x86_64\"",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "_DOWNLOAD_PATH",
        "kind": 5,
        "importPath": "nvidia_driver_setup.nvidia.vulkan",
        "description": "nvidia_driver_setup.nvidia.vulkan",
        "peekOfCode": "_DOWNLOAD_PATH = \"/tmp/vulkan_sdk.tar.xz\"\n# ---------------------------------------------------------------------------\n# Detection\n# ---------------------------------------------------------------------------\ndef _get_arch() -> str:\n    \"\"\"Return the platform subdirectory used inside the SDK tarball.\"\"\"\n    machine = platform.machine()\n    if machine in (\"x86_64\", \"AMD64\", \"x86-64\"):\n        return \"x86_64\"\n    if machine in (\"aarch64\", \"arm64\"):",
        "detail": "nvidia_driver_setup.nvidia.vulkan",
        "documentation": {}
    },
    {
        "label": "get_system_info",
        "kind": 2,
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "peekOfCode": "def get_system_info():\n    \"\"\"Gather comprehensive system information\"\"\"\n    info = {\n        'os': {},\n        'kernel': None,\n        'gpu': {},\n        'capabilities': {\n            'vulkan_supported': False,\n            'nvenc_supported': False,\n            'nvdec_supported': False,",
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "display_system_info",
        "kind": 2,
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "peekOfCode": "def display_system_info(info):\n    \"\"\"Display system information in a formatted way\"\"\"\n    print(\"\\n\" + \"=\" * 60)\n    print(\"                    SYSTEM INFORMATION\")\n    print(\"=\" * 60)\n    # OS Info\n    print(f\"\\n  Operating System: {info['os']['pretty_name']}\")\n    print(f\"  Kernel:           {info['kernel']}\")\n    # GPU Info\n    if info['gpu'].get('name') or info['gpu'].get('model'):",
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "run_preliminary_checks",
        "kind": 2,
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "peekOfCode": "def run_preliminary_checks():\n    \"\"\"Run all preliminary system checks.\n    Only performs fast, essential gates before showing the menu:\n    GPU present, OS version, dependencies, and internet.\n    Performance recommendations are shown once (marker file).\n    Cleanup/audit is available as a menu item.\n    \"\"\"\n    log_step(\"Running preliminary system checks...\")\n    _show_performance_note_once()\n    _check_nvidia_gpu_present()",
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "detect_existing_installations",
        "kind": 2,
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "peekOfCode": "def detect_existing_installations():\n    \"\"\"Detect what's already installed on the system\"\"\"\n    installations = {\n        'nvidia_driver': {'installed': False, 'version': None},\n        'docker': {'installed': False, 'version': None},\n        'nvidia_runtime': {'installed': False, 'version': None},\n        'vulkan': {'installed': False, 'version': None},\n        'vulkan_sdk': {'installed': False, 'version': None},\n        'cuda_toolkit': {'installed': False, 'version': None},\n    }",
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "check_gpu_capabilities",
        "kind": 2,
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "peekOfCode": "def check_gpu_capabilities():\n    \"\"\"Check GPU capabilities for media processing\"\"\"\n    log_step(\"Checking GPU capabilities for media processing...\")\n    try:\n        # Get GPU model\n        gpu_model = run_command(\n            \"nvidia-smi --query-gpu=gpu_name --format=csv,noheader\",\n            capture_output=True\n        )\n        log_info(f\"Detected GPU: {gpu_model}\")",
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "_ACKNOWLEDGED_MARKER",
        "kind": 5,
        "importPath": "nvidia_driver_setup.system.checks",
        "description": "nvidia_driver_setup.system.checks",
        "peekOfCode": "_ACKNOWLEDGED_MARKER = \"/var/lib/nvidia-setup/.acknowledged\"\ndef get_system_info():\n    \"\"\"Gather comprehensive system information\"\"\"\n    info = {\n        'os': {},\n        'kernel': None,\n        'gpu': {},\n        'capabilities': {\n            'vulkan_supported': False,\n            'nvenc_supported': False,",
        "detail": "nvidia_driver_setup.system.checks",
        "documentation": {}
    },
    {
        "label": "Colors",
        "kind": 6,
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "peekOfCode": "class Colors:\n    \"\"\"ANSI color codes for terminal output\"\"\"\n    RESET = '\\033[0m'\n    BOLD = '\\033[1m'\n    RED = '\\033[1;31m'\n    GREEN = '\\033[1;32m'\n    YELLOW = '\\033[1;33m'\n    BLUE = '\\033[1;34m'\n    CYAN = '\\033[1;36m'\ndef log_info(message):",
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_info",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "peekOfCode": "def log_info(message):\n    \"\"\"Log info message in green\"\"\"\n    print(f\"{Colors.GREEN}[INFO]  {message}{Colors.RESET}\")\ndef log_warn(message):\n    \"\"\"Log warning message in yellow\"\"\"\n    print(f\"{Colors.YELLOW}[WARN]  {message}{Colors.RESET}\")\ndef log_error(message):\n    \"\"\"Log error message in red\"\"\"\n    print(f\"{Colors.RED}[ERROR] {message}{Colors.RESET}\")\ndef log_prompt(message):",
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_warn",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "peekOfCode": "def log_warn(message):\n    \"\"\"Log warning message in yellow\"\"\"\n    print(f\"{Colors.YELLOW}[WARN]  {message}{Colors.RESET}\")\ndef log_error(message):\n    \"\"\"Log error message in red\"\"\"\n    print(f\"{Colors.RED}[ERROR] {message}{Colors.RESET}\")\ndef log_prompt(message):\n    \"\"\"Log prompt message in cyan\"\"\"\n    print(f\"{Colors.CYAN}[INPUT] {message}{Colors.RESET}\", end='')\ndef log_step(message):",
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_error",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "peekOfCode": "def log_error(message):\n    \"\"\"Log error message in red\"\"\"\n    print(f\"{Colors.RED}[ERROR] {message}{Colors.RESET}\")\ndef log_prompt(message):\n    \"\"\"Log prompt message in cyan\"\"\"\n    print(f\"{Colors.CYAN}[INPUT] {message}{Colors.RESET}\", end='')\ndef log_step(message):\n    \"\"\"Log step message in blue with newline before\"\"\"\n    print(f\"\\n{Colors.BLUE}[STEP]  {message}{Colors.RESET}\")\ndef log_success(message):",
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_prompt",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "peekOfCode": "def log_prompt(message):\n    \"\"\"Log prompt message in cyan\"\"\"\n    print(f\"{Colors.CYAN}[INPUT] {message}{Colors.RESET}\", end='')\ndef log_step(message):\n    \"\"\"Log step message in blue with newline before\"\"\"\n    print(f\"\\n{Colors.BLUE}[STEP]  {message}{Colors.RESET}\")\ndef log_success(message):\n    \"\"\"Log success message in bold green\"\"\"\n    print(f\"{Colors.BOLD}{Colors.GREEN}✓ {message}{Colors.RESET}\")",
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_step",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "peekOfCode": "def log_step(message):\n    \"\"\"Log step message in blue with newline before\"\"\"\n    print(f\"\\n{Colors.BLUE}[STEP]  {message}{Colors.RESET}\")\ndef log_success(message):\n    \"\"\"Log success message in bold green\"\"\"\n    print(f\"{Colors.BOLD}{Colors.GREEN}✓ {message}{Colors.RESET}\")",
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "log_success",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.logging",
        "description": "nvidia_driver_setup.utils.logging",
        "peekOfCode": "def log_success(message):\n    \"\"\"Log success message in bold green\"\"\"\n    print(f\"{Colors.BOLD}{Colors.GREEN}✓ {message}{Colors.RESET}\")",
        "detail": "nvidia_driver_setup.utils.logging",
        "documentation": {}
    },
    {
        "label": "prompt_yes_no",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.prompts",
        "description": "nvidia_driver_setup.utils.prompts",
        "peekOfCode": "def prompt_yes_no(prompt, default='y'):\n    \"\"\"\n    Interactive yes/no prompt\n    Args:\n        prompt: Question to ask\n        default: Default answer ('y' or 'n')\n    Returns:\n        bool: True for yes, False for no\n    \"\"\"\n    _flush_stdin()",
        "detail": "nvidia_driver_setup.utils.prompts",
        "documentation": {}
    },
    {
        "label": "prompt_choice",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.prompts",
        "description": "nvidia_driver_setup.utils.prompts",
        "peekOfCode": "def prompt_choice(prompt, choices, default=None):\n    \"\"\"\n    Interactive multiple choice prompt\n    Args:\n        prompt: Question to ask\n        choices: List of choices\n        default: Default choice index (0-based)\n    Returns:\n        int: Index of selected choice\n    \"\"\"",
        "detail": "nvidia_driver_setup.utils.prompts",
        "documentation": {}
    },
    {
        "label": "prompt_input",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.prompts",
        "description": "nvidia_driver_setup.utils.prompts",
        "peekOfCode": "def prompt_input(prompt, default=None, required=True):\n    \"\"\"\n    Interactive input prompt\n    Args:\n        prompt: Question to ask\n        default: Default value\n        required: Whether input is required\n    Returns:\n        str: User input or default\n    \"\"\"",
        "detail": "nvidia_driver_setup.utils.prompts",
        "documentation": {}
    },
    {
        "label": "prompt_acknowledge",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.prompts",
        "description": "nvidia_driver_setup.utils.prompts",
        "peekOfCode": "def prompt_acknowledge(message, required_response):\n    \"\"\"\n    Force user to type specific text to acknowledge\n    Args:\n        message: Message to display\n        required_response: Exact text user must type\n    \"\"\"\n    print(f\"\\n{message}\\n\")\n    while True:\n        log_prompt(f\"Type '{required_response}' to acknowledge: \")",
        "detail": "nvidia_driver_setup.utils.prompts",
        "documentation": {}
    },
    {
        "label": "prompt_multi_select",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.prompts",
        "description": "nvidia_driver_setup.utils.prompts",
        "peekOfCode": "def prompt_multi_select(\n    prompt: str,\n    options: list[str],\n    descriptions: list[str],\n    statuses: list[str],\n    pre_selected: set[int] | None = None,\n    exit_label: str = \"Exit\",\n) -> list[int]:\n    \"\"\"Multi-select checkbox menu.\n    Uses curses for interactive arrow-key navigation when available,",
        "detail": "nvidia_driver_setup.utils.prompts",
        "documentation": {}
    },
    {
        "label": "AptManager",
        "kind": 6,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "class AptManager:\n    \"\"\"Manages apt operations with caching\"\"\"\n    _update_done: bool = False\n    def update(self):\n        \"\"\"Update apt cache if not already done\"\"\"\n        if not AptManager._update_done:\n            run_command(\"apt-get update\")\n            AptManager._update_done = True\n    @classmethod\n    def reset_cache(cls):",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "run_command",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def run_command(cmd, shell=True, check=True, capture_output=False):\n    \"\"\"\n    Execute a system command with logging\n    Args:\n        cmd: Command to execute (string or list)\n        shell: Whether to use shell\n        check: Whether to raise exception on failure\n        capture_output: Whether to capture and return output\n    Returns:\n        CompletedProcess object or output string if capture_output=True",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "cleanup_nvidia_repos",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def cleanup_nvidia_repos():\n    \"\"\"Clean up stale NVIDIA repository and keyring files.\n    Only removes repo/keyring files that may conflict with fresh setup.\n    Does NOT touch installed driver packages - use cleanup_old_nvidia_drivers() for that.\n    \"\"\"\n    log_info(\"Cleaning up NVIDIA repository files...\")\n    # Repository files to remove\n    repo_files = [\n        \"/etc/apt/sources.list.d/nvidia-docker.list\",\n        \"/etc/apt/sources.list.d/nvidia-container-toolkit.list\",",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "cleanup_old_nvidia_drivers",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def cleanup_old_nvidia_drivers() -> bool:\n    \"\"\"Detect and remove old NVIDIA driver packages, keeping only the newest.\n    Queries dpkg for all installed nvidia-driver-XXX packages (including\n    -server variants and associated library packages), identifies the highest\n    version, and offers to purge all others.\n    Returns:\n        True if packages were removed, False otherwise.\n    \"\"\"\n    try:\n        result = subprocess.run(",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "get_running_driver_version",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def get_running_driver_version() -> str | None:\n    \"\"\"Get the currently running NVIDIA driver version from nvidia-smi.\n    Returns:\n        Full version string (e.g. '590.48.01') or None if not available.\n    \"\"\"\n    try:\n        output = subprocess.run(\n            \"nvidia-smi --query-gpu=driver_version --format=csv,noheader\",\n            shell=True, capture_output=True, text=True,\n        )",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "audit_nvidia_packages",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def audit_nvidia_packages(current_major: str | None = None) -> dict[str, list[tuple[str, str]]]:\n    \"\"\"Audit all installed NVIDIA packages and categorize them.\n    Dynamically detects the current driver major version and categorizes all\n    installed NVIDIA packages as CURRENT, OLD, or OTHER.  No versions are\n    hardcoded -- the running driver is detected via nvidia-smi.\n    Args:\n        current_major: Override for the current driver major version.\n            If None, auto-detected from nvidia-smi.\n    Returns:\n        Dict with keys 'current', 'old', 'other', each mapping to a list",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "audit_nvidia_repos",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def audit_nvidia_repos() -> dict[str, list[str]]:\n    \"\"\"Audit NVIDIA-related APT repository sources.\n    Checks /etc/apt/sources.list and /etc/apt/sources.list.d/ for any\n    NVIDIA repository entries.  Also queries apt-cache policy for the\n    current driver package.\n    Returns:\n        Dict with keys:\n            'sources_list_entries': lines from sources.list mentioning nvidia\n            'sources_list_d_files': files in sources.list.d referencing nvidia\n    \"\"\"",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "create_apt_pin_file",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def create_apt_pin_file(major_version: str, dry_run: bool = True) -> bool:\n    \"\"\"Create an APT preferences pin file to prevent NVIDIA driver upgrades.\n    Creates /etc/apt/preferences.d/nvidia-pin with Pin-Priority 1001 so that\n    only the current major version can be installed, blocking accidental\n    upgrades to a newer major version.\n    Args:\n        major_version: The driver major version to pin (e.g. '590').\n        dry_run: If True, only report what would be created.\n    Returns:\n        True if the pin file was created (or would be in dry-run).",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "manage_unattended_upgrades_blacklist",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def manage_unattended_upgrades_blacklist(dry_run: bool = True) -> bool:\n    \"\"\"Add NVIDIA packages to the unattended-upgrades blacklist.\n    Checks /etc/apt/apt.conf.d/50unattended-upgrades for existing NVIDIA\n    entries and adds them if missing.  Creates a timestamped backup before\n    modifying the file.\n    Args:\n        dry_run: If True, only report what would be done.\n    Returns:\n        True if NVIDIA is already blacklisted or was successfully added.\n    \"\"\"",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "verify_nvidia_cleanup_state",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def verify_nvidia_cleanup_state(dry_run: bool = True) -> dict[str, bool]:\n    \"\"\"Verify the final state of NVIDIA driver cleanup and pinning.\n    Shows installed packages, held packages, APT pin file status,\n    and unattended-upgrades blacklist status.\n    Args:\n        dry_run: Whether we are in dry-run mode (affects messaging).\n    Returns:\n        Dict with verification results:\n            'packages_ok': True if only current driver packages are installed\n            'holds_ok': True if packages are held",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "cleanup_stale_nvidia_libraries",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def cleanup_stale_nvidia_libraries(current_version: str, dry_run: bool = True) -> dict[str, list[str]]:\n    \"\"\"Find and remove NVIDIA shared libraries from old driver versions.\n    After driver upgrades, old versioned .so files (e.g. libnvidia-encode.so.565.57.01)\n    may remain on disk.  These confuse the dynamic linker and the NVIDIA container\n    runtime, causing NVENC failures inside Docker containers.\n    Args:\n        current_version: The running driver version to keep (e.g. '590.48.01').\n        dry_run: If True (default), only report findings without modifying anything.\n    Returns:\n        Dict with keys 'stale_files' and 'stale_symlinks' listing what was found/removed.",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "repair_nvidia_symlinks",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def repair_nvidia_symlinks(current_version: str, dry_run: bool = True) -> list[str]:\n    \"\"\"Ensure all NVIDIA .so.1 symlinks point to the current driver version.\n    For each known NVIDIA library, verifies that:\n      libXXX.so.1 -> libXXX.so.CURRENT_VERSION\n      libXXX.so   -> libXXX.so.1\n    Args:\n        current_version: The running driver version (e.g. '590.48.01').\n        dry_run: If True (default), only report problems without fixing.\n    Returns:\n        List of symlinks that were broken (and fixed if not dry_run).",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "pin_nvidia_driver_version",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def pin_nvidia_driver_version(major_version: str, dry_run: bool = False) -> bool:\n    \"\"\"Pin the current NVIDIA driver packages to prevent unattended upgrades.\n    Performs three layers of protection:\n    1. apt-mark hold on all installed NVIDIA packages for this major version\n    2. Creates /etc/apt/preferences.d/nvidia-pin with Pin-Priority 1001\n    3. Adds NVIDIA to unattended-upgrades blacklist (if configured)\n    Args:\n        major_version: The driver major version to pin (e.g. '590').\n        dry_run: If True, only report what would be done without making changes.\n    Returns:",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "full_nvidia_cleanup",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def full_nvidia_cleanup(dry_run: bool = True) -> bool:\n    \"\"\"Run comprehensive NVIDIA driver cleanup.\n    Orchestrates all cleanup steps:\n    1. Audit installed NVIDIA packages (categorize current/old/other)\n    2. Audit NVIDIA APT repository sources\n    3. Remove old driver APT packages\n    4. Remove stale versioned library files\n    5. Repair broken symlinks\n    6. Pin the current driver version (apt-mark hold + pin file + unattended-upgrades)\n    7. Verify final state",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "detect_gpu_vendors",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def detect_gpu_vendors() -> list[str]:\n    \"\"\"Detect GPU vendors present in the system via lspci.\n    Returns:\n        List of vendor identifiers found: 'nvidia', 'intel', 'amd'.\n        May contain multiple entries on systems with both dGPU and iGPU.\n    \"\"\"\n    vendors: list[str] = []\n    try:\n        result = subprocess.run(\n            \"lspci 2>/dev/null | grep -iE 'vga|3d|display'\",",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "check_internet",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def check_internet():\n    \"\"\"Check internet connectivity\"\"\"\n    try:\n        run_command(\"ping -c 1 8.8.8.8\", capture_output=True)\n        return True\n    except Exception:\n        return False\ndef get_os_info():\n    \"\"\"Get OS information from /etc/os-release\"\"\"\n    try:",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "get_os_info",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def get_os_info():\n    \"\"\"Get OS information from /etc/os-release\"\"\"\n    try:\n        with open('/etc/os-release', 'r') as f:\n            lines = f.readlines()\n        info = {}\n        for line in lines:\n            if '=' in line:\n                key, value = line.strip().split('=', 1)\n                info[key] = value.strip('\"')",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "check_nvidia_gpu",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def check_nvidia_gpu():\n    \"\"\"Check if NVIDIA GPU is present\"\"\"\n    try:\n        output = run_command(\"lspci | grep -i nvidia\", capture_output=True, check=False)\n        return bool(output)\n    except Exception:\n        return False\ndef write_egl_icd_default() -> None:\n    \"\"\"Create an EGL-based NVIDIA ICD JSON as the default Vulkan ICD.\n    The standard NVIDIA ICD points to libGLX_nvidia.so.0, which some",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "write_egl_icd_default",
        "kind": 2,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "def write_egl_icd_default() -> None:\n    \"\"\"Create an EGL-based NVIDIA ICD JSON as the default Vulkan ICD.\n    The standard NVIDIA ICD points to libGLX_nvidia.so.0, which some\n    statically-linked FFmpeg builds cannot use for Vulkan initialisation\n    (fails with VK_ERROR_INCOMPATIBLE_DRIVER).  Using libEGL_nvidia.so.0\n    works universally.\n    The Vulkan api_version is read from the driver-installed ICD at\n    /usr/share/vulkan/icd.d/nvidia_icd.json so it stays in sync with\n    the installed driver.  Falls back to a safe default if unreadable.\n    Creates /etc/vulkan/icd.d/ and the ICD file if they do not exist.",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "_NVIDIA_LIB_DIRS",
        "kind": 5,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "_NVIDIA_LIB_DIRS = [\n    \"/usr/lib/x86_64-linux-gnu\",\n    \"/usr/lib64\",\n    \"/usr/lib/i386-linux-gnu\",\n    \"/usr/lib\",\n    \"/lib/x86_64-linux-gnu\",\n    \"/lib\",\n]\n# NVIDIA library base names (without .so suffix) that may have versioned copies\n_NVIDIA_LIB_BASES = [",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "_NVIDIA_LIB_BASES",
        "kind": 5,
        "importPath": "nvidia_driver_setup.utils.system",
        "description": "nvidia_driver_setup.utils.system",
        "peekOfCode": "_NVIDIA_LIB_BASES = [\n    \"libnvidia-encode\", \"libnvidia-decode\", \"libnvidia-fbc\",\n    \"libnvidia-ml\", \"libnvidia-opencl\", \"libnvidia-opticalflow\",\n    \"libnvidia-ptxjitcompiler\", \"libnvidia-allocator\", \"libnvidia-cfg\",\n    \"libnvidia-glcore\", \"libnvidia-glsi\", \"libnvidia-glvkspirv\",\n    \"libnvidia-gpucomp\", \"libnvidia-tls\", \"libnvidia-nvvm\",\n    \"libnvidia-ngx\", \"libnvidia-api\", \"libnvidia-vulkan-producer\",\n    \"libcuda\", \"libcudadebugger\", \"libnvcuvid\",\n]\ndef cleanup_stale_nvidia_libraries(current_version: str, dry_run: bool = True) -> dict[str, list[str]]:",
        "detail": "nvidia_driver_setup.utils.system",
        "documentation": {}
    },
    {
        "label": "show_banner",
        "kind": 2,
        "importPath": "nvidia_driver_setup.cli",
        "description": "nvidia_driver_setup.cli",
        "peekOfCode": "def show_banner() -> None:\n    \"\"\"Display application banner.\"\"\"\n    banner = \"\"\"\n\\u2554\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2557\n\\u2551               NVIDIA Driver Setup - Python                  \\u2551\n\\u2551          Hardware Acceleration for Media Servers            \\u2551\n\\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d\n\"\"\"\n    print(banner)\ndef _check_nvenc_patch_status() -> str:",
        "detail": "nvidia_driver_setup.cli",
        "documentation": {}
    },
    {
        "label": "build_menu_options",
        "kind": 2,
        "importPath": "nvidia_driver_setup.cli",
        "description": "nvidia_driver_setup.cli",
        "peekOfCode": "def build_menu_options(\n    installations: dict,\n) -> tuple[list[str], list[str], list[str]]:\n    \"\"\"Build the multi-select menu items from current installation state.\n    Returns:\n        (options, descriptions, statuses) - parallel lists for prompt_multi_select.\n    \"\"\"\n    options: list[str] = []\n    descriptions: list[str] = []\n    statuses: list[str] = []",
        "detail": "nvidia_driver_setup.cli",
        "documentation": {}
    },
    {
        "label": "execute_selected_items",
        "kind": 2,
        "importPath": "nvidia_driver_setup.cli",
        "description": "nvidia_driver_setup.cli",
        "peekOfCode": "def execute_selected_items(selected: list[int], installations: dict) -> None:\n    \"\"\"Execute selected menu items in the correct order.\n    Items are sorted by EXECUTION_ORDER so that drivers install before\n    Docker, patches come after CUDA, and self-update always runs last.\n    \"\"\"\n    ordered = sorted(selected, key=lambda idx: EXECUTION_ORDER.get(idx, 99))\n    total = len(ordered)\n    for step, idx in enumerate(ordered, 1):\n        log_step(f\"[{step}/{total}] Running: item {idx + 1}\")\n        _execute_single_item(idx, installations)",
        "detail": "nvidia_driver_setup.cli",
        "documentation": {}
    },
    {
        "label": "show_post_installation_summary",
        "kind": 2,
        "importPath": "nvidia_driver_setup.cli",
        "description": "nvidia_driver_setup.cli",
        "peekOfCode": "def show_post_installation_summary() -> None:\n    \"\"\"Show post-installation summary and next steps.\"\"\"\n    log_success(\"Installation completed successfully!\")\n    summary = \"\"\"\n======================================================================\n                       Installation Summary\n======================================================================\nNext Steps:\n1. Reboot your system for all changes to take effect\n2. Test NVIDIA Docker integration:",
        "detail": "nvidia_driver_setup.cli",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "nvidia_driver_setup.cli",
        "description": "nvidia_driver_setup.cli",
        "peekOfCode": "def main() -> None:\n    \"\"\"Main installation process.\"\"\"\n    try:\n        # Check if running as root\n        if os.geteuid() != 0:\n            log_error(\"This script must be run as root (sudo).\")\n            sys.exit(1)\n        show_banner()\n        # Gather and display system information first\n        log_step(\"Gathering System Information\")",
        "detail": "nvidia_driver_setup.cli",
        "documentation": {}
    },
    {
        "label": "InstallMethod",
        "kind": 6,
        "importPath": "nvidia_driver_setup.updater",
        "description": "nvidia_driver_setup.updater",
        "peekOfCode": "class InstallMethod(Enum):\n    \"\"\"How nvidia-driver-setup was installed.\"\"\"\n    GIT_CLONE = \"git_clone\"\n    PIP = \"pip\"\n    UNKNOWN = \"unknown\"\ndef _get_project_root() -> Path:\n    \"\"\"Resolve the project root from this file's location.\"\"\"\n    return Path(__file__).resolve().parent.parent\ndef detect_install_method() -> InstallMethod:\n    \"\"\"Detect whether we were installed via git clone or pip.\"\"\"",
        "detail": "nvidia_driver_setup.updater",
        "documentation": {}
    },
    {
        "label": "detect_install_method",
        "kind": 2,
        "importPath": "nvidia_driver_setup.updater",
        "description": "nvidia_driver_setup.updater",
        "peekOfCode": "def detect_install_method() -> InstallMethod:\n    \"\"\"Detect whether we were installed via git clone or pip.\"\"\"\n    project_root = _get_project_root()\n    if (project_root / \".git\").is_dir():\n        return InstallMethod.GIT_CLONE\n    return InstallMethod.PIP\ndef _ensure_origin(cwd: str) -> None:\n    \"\"\"Ensure the git origin remote points to the canonical repo.\"\"\"\n    result = subprocess.run(\n        [\"git\", \"remote\", \"get-url\", \"origin\"],",
        "detail": "nvidia_driver_setup.updater",
        "documentation": {}
    },
    {
        "label": "run_self_update",
        "kind": 2,
        "importPath": "nvidia_driver_setup.updater",
        "description": "nvidia_driver_setup.updater",
        "peekOfCode": "def run_self_update() -> None:\n    \"\"\"Public entry point: detect method, check for updates, confirm, update.\"\"\"\n    log_step(\"Self-Update Check\")\n    method = detect_install_method()\n    log_info(f\"Install method: {method.value}\")\n    if method == InstallMethod.GIT_CLONE:\n        has_updates, summary = _check_git_updates()\n    elif method == InstallMethod.PIP:\n        has_updates, summary = _check_pip_updates()\n    else:",
        "detail": "nvidia_driver_setup.updater",
        "documentation": {}
    },
    {
        "label": "REPO_URL",
        "kind": 5,
        "importPath": "nvidia_driver_setup.updater",
        "description": "nvidia_driver_setup.updater",
        "peekOfCode": "REPO_URL = \"https://github.com/regix1/nvidia-driver-setup.git\"\nclass InstallMethod(Enum):\n    \"\"\"How nvidia-driver-setup was installed.\"\"\"\n    GIT_CLONE = \"git_clone\"\n    PIP = \"pip\"\n    UNKNOWN = \"unknown\"\ndef _get_project_root() -> Path:\n    \"\"\"Resolve the project root from this file's location.\"\"\"\n    return Path(__file__).resolve().parent.parent\ndef detect_install_method() -> InstallMethod:",
        "detail": "nvidia_driver_setup.updater",
        "documentation": {}
    }
]